# Intercepting Routes

인터셉팅 라우트는 현재 컨텍스트와 페이지를 유지하면서 로드할 수 있도록 해준다.
이런 라우팅 패러다임은 특정 라우트를 다른 라우트에 보여주고 싶을 때 유용하다.

예를 들어, 피드의 사진을 클릭했을 시, 모달이 피드위에 오버레이되면서 사진이 보여진다.
이런 경우에, 넥스트는 /feed 라우트를 가로채고 /photo/123으로 url을 마스크합니다.

![image](https://github.com/yujiseok/nextstep-with-next/assets/83855636/c1090667-b041-418c-8ac3-2f1ef64647b6)

하지만, 공유된 url이나 페이지 새로 고침으로 사진을 직접 접근한다면, 전체 사진 페이지가 모달에 랜더 될 것이다.
라우트 가로채기는 일어나지 않는다.

![image](https://github.com/yujiseok/nextstep-with-next/assets/83855636/bc8554e8-9201-46fc-ad65-a2a4b72a8cab)

## Convention

인터셉팅 라우트는 상대 경로인 ../와 비슷한 (..) 컨벤션으로 정의된다.

- (.) 같은 위치 세그먼트들
- (..) 한 계층 위 세그먼트들
- (..)(..) 두 계층 위 세그먼트들
- (...) 루트 app 디렉터리의 세그먼트들

예를 들어, (..)photo 디렉터리를 만들어 photo 세그먼트를 feed 세그먼트에서 가로챌 수 있다.

![image](https://github.com/yujiseok/nextstep-with-next/assets/83855636/ab18265e-248c-46e8-b8a9-0c15c9a304f9)

> (..) 컨벤션은 파일 시스템 기반이 아닌, 라우트 세그먼트 기반이다.

## Examples

### Modal

인터셉팅 라우트는 병렬 라우트와 함께 모달을 생성하는 데 사용된다.

이 패턴으로 모달을 작성하면 몇 가지 일반적인 문제를 해결할 수 있으며 다음과 같은 작업을 수행할 수 있다:

- 공유 가능한 url로 모달 컨텐트를 만들 수 있다.
- 모달을 닫는 대신, 페이지가 새로고침 될 때 컨텍스트 보존
- 이전 라우트로 가는 것 대신 뒤로 갈때 모달 닫기
- 앞으로 네비게이션 시 모달 재오픈

![image](https://github.com/yujiseok/nextstep-with-next/assets/83855636/f1761680-3260-455d-b780-9fb065d01e4b)

> 위 예에서 photo 세그먼트는 @modal이 세그먼트가 아니라 슬롯이라 (..)를 사용할 수 있다. 이것은 photo 라우트가 파일 시스템 상에서는 두 단계지만, 라우트에서 한 세그먼트 위의 유일한 라우트라는 것을 뜻한다.

다른 예로는 /login 페이지를 가리킬 때 탑 내브바에서 로그인 모달을 띄울 수 있는 것과 사이드 모달로 쇼핑 카트를 여는 것이 있다.

---

## What I Learned

병렬 라우트와 인터셉팅 라우트 둘다 생소한 개념이라 잘 이해가 가지 않는데, 여러번 읽어보고 실제로 코드를 작성해봐야겠다.
넥스트를 공부하면 할수록 정말 안 쓸 이유가 없는 것 같다.
